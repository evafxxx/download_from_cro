var dnldmp3 = '<svg enable-background="new 0 0 64 64" version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" >' +
    '<style type="text/css">	.st0{fill:#C75C5C;}.st1{opacity:0.2;}.st2{fill:#231F20;}.st3{fill:#FFFFFF;}.st4{fill:#8C81D4;}</style>' +
    '<circle class="st0" cx="32" cy="32" r="32"/>	' +
    '<g class="st1"><path class="st2" d="m40 11.2v0 0z"/><path class="st2" d="m24 11.1v0 0z"/></g>' +
    '<g class="st1">	<path class="st2" d="m48 32c0-6.5-3.8-12-9.4-14.5-1.7-0.8-2.6 0.5-2.6 1.6v8.5c0 0.8 0.7 1.4 1.5 1.4h3.1c1.5 0 1.9 1.1 0.9 2.4l-7.7 9.8c-1 1.2-2.6 1.2-3.5 0l-7.7-9.8c-1-1.2-0.6-2.4 0.9-2.4h3.1c0.8 0 1.5-0.6 1.5-1.4v-8.5c0-1.1-1.5-2.1-2.8-1.6-4.3 2-7.6 5.9-8.7 10.6-4.9 0.8-8.6 4.9-8.6 9.9 0 5.5 4.5 10 10 10h30c4.4 0 8-3.6 8-8s-3.6-8-8-8z"/></g>' +
    '<path class="st3" d="m48 30c0-6.5-3.8-12-9.4-14.5-1.7-0.8-2.6 0.5-2.6 1.6v8.5c0 0.8 0.7 1.4 1.5 1.4h3.1c1.5 0 1.9 1.1 0.9 2.4l-7.7 9.8c-1 1.2-2.6 1.2-3.5 0l-7.7-9.8c-1-1.2-0.6-2.4 0.9-2.4h3.1c0.8 0 1.5-0.6 1.5-1.4v-8.5c0-1.1-1.5-2.1-2.8-1.6-4.3 2-7.6 5.9-8.7 10.6-4.9 0.8-8.6 4.9-8.6 9.9 0 5.5 4.5 10 10 10h30c4.4 0 8-3.6 8-8s-3.6-8-8-8z"/>' +
    '<path class="st4" d="m40 9.2v0 0z"/>' +
    '<path class="st4" d="m24 9.1v0 0z"/>' +
    '<g fill="#fff"><path d="m18.527 14.294q-0.36488-1.1658-1.1755-3.4491-0.804-2.286-1.2645-3.4208 0.56944-0.21562 0.92114-0.35834 0.40479-0.16426 0.87056-0.36872l0.38046 1.0899q0.08579-0.39806 0.18023-0.66051 0.09839-0.27178 0.30977-0.55078 0.21139-0.279 0.5453-0.5227 0.33786-0.25303 0.73601-0.4146 0.29862-0.12118 0.60156-0.17455 0.30025-0.060011 0.56896-0.045393 0.27265 0.00529 0.48577 0.073381 0.21975 0.065398 0.39989 0.18552 0.17744 0.11348 0.43941 0.37815 0.05174-0.2915 0.10925-0.4926 0.06145-0.21043 0.19985-0.4598 0.13839-0.24938 0.34478-0.46451t0.49404-0.40142q0.2916-0.19561 0.63003-0.33295 0.57732-0.23428 1.1664-0.24918 0.58636-0.021542 1.0453 0.2714 0.45624 0.28631 0.70129 0.89018 0.12926 0.31852 0.33324 0.95451t0.70581 2.0631q0.49913 1.4205 0.80217 2.1863-0.48981 0.1833-0.86142 0.3341-0.43797 0.17773-1.0232 0.43066-0.28765-0.88027-0.61425-1.8375l-0.53703-1.5519q-0.2011-0.59079-0.36266-0.98894-0.19119-0.47115-0.44076-0.64811-0.24562-0.18629-0.51827-0.19158-0.26871-0.014619-0.55405 0.10117-0.29862 0.12118-0.49837 0.33362-0.19312 0.20975-0.30314 0.54809-0.10339 0.33564-0.07886 0.71985 0.02183 0.37757 0.21648 1.0096 0.19196 0.62541 0.56001 1.6276l0.70215 1.8636q-0.55617 0.21023-0.92114 0.35834-0.36498 0.14811-0.97009 0.40912-0.1609-0.52982-0.71552-2.1442-0.55462-1.6144-0.77813-2.1651-0.11848-0.29198-0.24572-0.47221-0.12993-0.18686-0.34862-0.30679-0.21475-0.12926-0.4422-0.13743-0.22745-0.00818-0.47961 0.094152-0.46451 0.1885-0.69235 0.63647-0.22783 0.44797-0.18638 1.0263 0.04809 0.57559 0.57559 2.085 0.53145 1.5001 0.88421 2.3694-0.61589 0.23447-0.92778 0.36103-0.3517 0.14272-0.97009 0.40912z"/><path d="m30.417 13.45q0.44083-1.957 1.0019-5.0901 0.56109-3.1331 0.82256-5.0995 1.3809-0.062018 2.1296-0.041938t1.4799 0.11731q0.95836 0.12743 1.7232 0.46032 0.77198 0.33383 1.1768 0.9295 0.41194 0.59661 0.54566 1.3296 0.14082 0.73395 0.03887 1.5006-0.10289 0.77379-0.4183 1.4615t-0.8462 1.2023q-0.52985 0.50751-1.1682 0.68994-0.6303 0.17627-1.3402 0.08188-0.41884-0.05569-0.81737-0.20983-0.39143-0.15319-0.68207-0.358-0.28355-0.20387-0.46061-0.39357-0.17612-0.19681-0.43701-0.57105l-0.5171 3.0739-0.07129 0.48179q-0.01937 0.09134-0.10149 0.70896-0.65216-0.09394-1.0071-0.14114zm3.6101-8.6229q-0.10066 0.37674-0.15878 0.65077l-0.14737 0.78232q-0.09636 0.50735-0.12845 0.74872-0.05758 0.43304-0.02525 0.84191 0.03943 0.40981 0.25772 0.77839 0.2254 0.36952 0.56385 0.59514 0.34649 0.21946 0.73694 0.27138 0.53952 0.071739 1.0203-0.17499 0.48877-0.25289 0.80942-0.81711 0.32066-0.56422 0.41033-1.2386 0.099113-0.74539-0.10268-1.2924-0.19376-0.55315-0.60984-0.84689-0.41609-0.29373-0.98401-0.36925-0.7383-0.098169-1.6421 0.070631z"/><path d="m40.336 11.677q0.46263-0.85898 0.76175-1.5075 0.98572 1.2392 2.0645 1.9048 0.53635 0.3309 1.0744 0.42722 0.54412 0.10008 0.98954-0.06269 0.45528-0.1651 0.72225-0.59784 0.22561-0.36569 0.1815-0.77157-0.03426-0.40821-0.40255-0.82056-0.35844-0.41468-1.0654-0.85086-0.45102-0.27826-0.96636-0.52046 0.49337-0.66331 0.91724-1.2685 0.322 0.2828 0.6694 0.49713 0.53635 0.3309 1.0818 0.52434 0.55151 0.1972 1.0152 0.04572 0.46746-0.15758 0.7006-0.53546 0.094-0.15237 0.13173-0.32264 0.04758-0.1726 0.0337-0.34104-4e-3 -0.17078-0.07562-0.34117-0.065495-0.16662-0.18402-0.31548-0.11477-0.15495-0.35429-0.35321-0.23952-0.19826-0.53817-0.38251-0.40226-0.24817-0.86884-0.4603-0.45672-0.21446-1.2113-0.47804l0.4279-0.43443 0.63887-0.70818q0.76107 0.33491 1.2651 0.59539 0.50406 0.26049 1.0648 0.60643 0.63996 0.39482 1.1733 0.86694 0.53947 0.47587 0.80818 0.99507 0.26871 0.5192 0.21791 1.0516-0.04471 0.5362-0.34553 1.0238-0.19553 0.31693-0.47872 0.57137-0.27943 0.24834-0.62397 0.39761-0.33844 0.15303-0.66924 0.18456-0.3247 0.03529-0.60195 0.0073t-0.77209-0.13975q0.39747 0.33778 0.57643 0.566 0.18272 0.22212 0.30295 0.53191 0.12398 0.30369 0.14332 0.62697 0.0231 0.31718-0.07816 0.65862-0.0975 0.33534-0.29303 0.65228-0.35346 0.57292-0.94359 0.91568-0.58027 0.34042-1.3051 0.35602-0.71878 0.01936-1.4598-0.25266-0.74473-0.26592-1.4578-0.70587-0.52416-0.32338-1.0435-0.73636-0.51937-0.41298-1.2233-1.0997z"/></g><circle transform="rotate(230.41)" cx="-45.053" cy="4.2701" r="21.467" fill="none" stop-color="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.0405" style="paint-order:stroke fill markers"/><circle transform="matrix(-.66668 .74534 .74534 .66668 0 0)" cx="2.2498" cy="45.401" r="30.454" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width=".89097" style="paint-order:stroke fill markers"/></svg>';
var dnldstream = '<svg enable-background="new 0 0 64 64" version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" >' +
    '<style type="text/css">	.st0{fill:#C75C5C;}.st1{opacity:0.2;}.st2{fill:#231F20;}.st3{fill:#FFFFFF;}.st4{fill:#8C81D4;}</style>' +
    '<circle class="st0" cx="32" cy="32" r="32"/><g class="st1"><path class="st2" d="m40 11.2v0 0z"/><path class="st2" d="m24 11.1v0 0z"/></g>	' +
    '<g class="st1"><path class="st2" d="m48 32c0-6.5-3.8-12-9.4-14.5-1.7-0.8-2.6 0.5-2.6 1.6v8.5c0 0.8 0.7 1.4 1.5 1.4h3.1c1.5 0 1.9 1.1 0.9 2.4l-7.7 9.8c-1 1.2-2.6 1.2-3.5 0l-7.7-9.8c-1-1.2-0.6-2.4 0.9-2.4h3.1c0.8 0 1.5-0.6 1.5-1.4v-8.5c0-1.1-1.5-2.1-2.8-1.6-4.3 2-7.6 5.9-8.7 10.6-4.9 0.8-8.6 4.9-8.6 9.9 0 5.5 4.5 10 10 10h30c4.4 0 8-3.6 8-8s-3.6-8-8-8z"/>' +
    '</g>' +
    '<path class="st3" d="m48 30c0-6.5-3.8-12-9.4-14.5-1.7-0.8-2.6 0.5-2.6 1.6v8.5c0 0.8 0.7 1.4 1.5 1.4h3.1c1.5 0 1.9 1.1 0.9 2.4l-7.7 9.8c-1 1.2-2.6 1.2-3.5 0l-7.7-9.8c-1-1.2-0.6-2.4 0.9-2.4h3.1c0.8 0 1.5-0.6 1.5-1.4v-8.5c0-1.1-1.5-2.1-2.8-1.6-4.3 2-7.6 5.9-8.7 10.6-4.9 0.8-8.6 4.9-8.6 9.9 0 5.5 4.5 10 10 10h30c4.4 0 8-3.6 8-8s-3.6-8-8-8z"/>' +
    '<path class="st4" d="m40 9.2v0 0z"/>' +
    '<path class="st4" d="m24 9.1v0 0z"/>' +
    '<circle transform="rotate(230.41)" cx="-45.053" cy="4.2701" r="21.467" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.0405" style="paint-order:stroke fill markers"/><circle transform="matrix(-.66668 .74534 .74534 .66668 0 0)" cx="2.2498" cy="45.401" r="30.454" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width=".89097" style="paint-order:stroke fill markers"/>' +
    '<g fill="#fff" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">' +
    '<path d="m11.873 21.272-1.5002-0.85626q0.69845-0.44272 1.1083-0.80315 0.40344-0.36496 0.66158-0.72782 0.25814-0.36286 0.352-0.67001 0.0875-0.31168 8e-3 -0.55038-0.08584-0.24323-0.27045-0.37456-0.08276-0.05887-0.16637-0.08959-0.07908-0.03708-0.18718-0.04687-0.10356-0.01615-0.20798-0.0041-0.10626 0.0011-0.25694 0.03773-0.15705 0.03209-0.41754 0.11523l-0.51829 0.14903q-0.74154 0.22026-1.15 0.32276t-0.76447 0.11772q-0.36235 0.010686-0.68492-0.074973-0.32441-0.096553-0.59178-0.28676-0.46472-0.3306-0.68561-0.90959-0.21636-0.58536-0.022403-1.2623 0.18759-0.6815 0.7084-1.4136 0.59326-0.83395 1.565-1.7821l1.3894 0.86374q-0.82453 0.52561-1.3091 1.2068-0.26267 0.36923-0.38554 0.70368-0.12471 0.32355-0.05797 0.5532 0.060373 0.22511 0.24499 0.35645 0.10822 0.07699 0.24362 0.11578 0.12903 0.03426 0.31155 0.02029 0.18252-0.01397 0.37042-0.06247 0.19243-0.05486 0.77241-0.2367 0.57998-0.18184 1.0302-0.30259 0.45476-0.12711 0.83889-0.14147 0.37777-0.01889 0.73033 0.07852 0.35256 0.09741 0.63903 0.3012 0.47745 0.33965 0.67655 0.92233 0.1991 0.58267 0.0071 1.3377-0.192 0.75507-0.7128 1.4872-0.27172 0.38196-0.72485 0.88415-0.44676 0.50672-1.0434 1.0219z"/><path d="m19.282 11.348q0.19036 0.39646 0.74618 1.4392-0.42614 0.52068-0.69779 0.78212-0.27165 0.26145-0.53037 0.46327-0.45584 0.35558-0.88655 0.55285-0.42455 0.19246-0.82681 0.15946-0.40707-0.03916-0.71915-0.26141-0.31073-0.23321-0.55579-0.54737-0.06247-0.08008-0.16202-0.2204-0.09955-0.14032-0.63306-0.91316l-1.8573-2.6731-0.88704 0.69195q-0.25751-0.39362-0.87196-1.2321l0.93016-0.72558q-0.24174-0.38611-0.8727-1.2712l0.61636-0.70869q0.19428-0.22091 0.72231-0.89042 0.60558 0.86523 1.1664 1.5969l1.5646-1.2205q0.60558 0.86523 0.88428 1.2225l-1.5708 1.2253q1.8264 2.608 2.1339 3.0023 0.29792 0.38192 0.54138 0.52889 0.24962 0.14217 0.50649 0.09041 0.25688-0.05176 0.46632-0.21513 0.154-0.12013 0.3011-0.27451 0.15326-0.15918 0.4918-0.60162z"/><path d="m21.246 12.134-1.209-3.5158-0.76638-2.0164q-0.23937-0.61962-0.49617-1.2405-0.04479-0.10829-0.29811-0.67987 0.67737-0.26326 0.99502-0.39464 0.36819-0.15229 0.96864-0.41755l0.38493 1.0329q0.11309-0.50331 0.23038-0.77164 0.1143-0.27554 0.2958-0.51125 0.18872-0.23869 0.45486-0.43331 0.26613-0.19462 0.57656-0.32302 0.28877-0.11944 0.62185-0.17266 0.2777 0.6714 0.76967 1.6769-0.47372 0.060665-0.82025 0.20399-0.41872 0.17319-0.68984 0.43751-0.26689 0.25411-0.41929 0.62151-0.14817 0.35719-0.15894 0.80127-0.01176 0.35995 0.12333 0.87052 0.09752 0.39929 0.43044 1.3268 0.34014 0.92457 0.70443 1.8053 0.14034 0.33931 0.37401 0.84292-0.55464 0.2125-1.0095 0.40062-0.4476 0.18513-1.0625 0.45637z"/><path d="m34.062 7.604q-0.075963 0.46584-0.19719 1.6697-0.83254 0.22599-1.4063 0.32031-0.57379 0.094319-1.1588 0.12666-1.0219 0.056497-1.8444-0.10147-0.81467-0.15839-1.4529-0.663-0.63864-0.5124-0.97082-1.2843-0.33218-0.7719-0.38005-1.6378-0.05305-0.95947 0.23278-1.8751 0.2854-0.92341 0.85456-1.5261 0.57653-0.61088 1.3359-0.8876 0.75889-0.28451 1.6014-0.33109 0.79566-0.04399 1.5245 0.11915 0.72844 0.15534 1.2371 0.58103 0.51645 0.42526 0.80923 1.0507 0.30015 0.61718 0.34328 1.3972 0.02027 0.36663-0.03617 0.76097l-5.7174 0.32392q3.56e-4 0.28948 0.0098 0.4611 0.02889 0.52264 0.23246 0.94955 0.20356 0.42691 0.56361 0.71216 0.36004 0.28525 0.84408 0.40715 0.4836 0.1141 0.94383 0.088658 0.53824-0.029758 1.1558-0.18127 0.62538-0.15194 1.4757-0.48063zm-5.2134-2.8728 3.6511-0.19403q-0.020701-0.37443-0.054022-0.55255t-0.13164-0.39959q-0.090944-0.2297-0.24084-0.39356-0.15033-0.17165-0.34401-0.27831-0.19368-0.10666-0.44675-0.15526-0.24527-0.049035-0.52609-0.03351-0.32762 0.018113-0.63404 0.13677-0.29862 0.11823-0.54525 0.32747-0.24664 0.20925-0.39708 0.46012-0.14264 0.25044-0.20814 0.48097-0.06593 0.22273-0.12324 0.60147z"/><path d="m38.783 3.9621q0.29423-0.49173 0.39335-0.6968 0.10647-0.20241 0.32941-0.61193 1.0842 0.1264 1.8828 0.30733 0.79858 0.18093 1.5112 0.43875 0.80811 0.29238 1.4149 0.72792 0.60942 0.4282 0.84259 0.97781t-0.04592 1.321q-0.15151 0.41875-0.89102 2.0953-0.73686 1.6692-1.4207 3.4905-0.55301-0.2167-1.0232-0.38681-0.44813-0.16214-1.0559-0.3654 0.41712-0.85437 0.89852-2.0012l0.75735-1.7947q-0.34562 0.082657-0.51912 0.10296-0.17351 0.020304-0.38109 0.019972-0.20492-0.00768-0.71559-0.042897-0.50801-0.042565-0.82173-0.048065t-0.58664 0.036991q-0.26292 0.037803-0.47302 0.13626-0.20744 0.091111-0.34203 0.2335-0.12459 0.1377-0.1937 0.32871-0.11164 0.30855-0.01772 0.60008 0.10392 0.28684 0.34384 0.47335 0.23992 0.1865 0.60724 0.3194 0.23509 0.085056 0.5055 0.14135 0.27776 0.058956 0.77171 0.071507-0.30578 0.36293-0.81184 1.1187-0.55349-0.10056-0.87002-0.19016-0.31652-0.089597-0.581-0.18528-0.92565-0.33491-1.4303-0.79999-0.50469-0.46508-0.59451-1.1124-0.082472-0.64464 0.11688-1.1956 0.11429-0.3159 0.33613-0.58458 0.22183-0.26868 0.52791-0.44872t0.72907-0.29286q0.42565-0.12016 1.1445-0.10931 0.72154 0.00351 1.8545 0.15586 0.30043 0.042233 0.63087 0.0704 0.3331 0.020821 0.53865 0.0038 0.2129-0.014361 0.39032-0.091406 0.18008-0.084392 0.28935-0.20271 0.11662-0.11566 0.16978-0.26259 0.10366-0.28651-0.015579-0.55397-0.1119-0.2648-0.38652-0.44725-0.26462-0.18713-0.6246-0.31737-1.3371-0.48376-3.1845-0.42938z"/><path d="m45.014 12.605q1.0832-0.77624 3.172-2.396 2.0938-1.6138 3.1122-2.4785 0.4179 0.51632 0.6859 0.83195 0.30845 0.36328 0.67938 0.77599l-0.99926 0.76647q0.44171-0.04709 0.74589-0.03889 0.31519 0.0091 0.67645 0.13281 0.36126 0.12371 0.7278 0.38642 0.37756 0.26361 0.68095 0.62093 0.22755 0.26799 0.38632 0.56362 0.16473 0.29058 0.24137 0.57396 0.08765 0.28429 0.0899 0.52835 0.0073 0.25002-0.05561 0.47767-0.05697 0.2226-0.24169 0.58442 0.31968-0.04596 0.54767-0.05507 0.239-0.0082 0.54464 0.04999 0.30564 0.0582 0.59903 0.19854 0.29339 0.14034 0.58465 0.37473 0.30227 0.23529 0.56016 0.53901 0.43992 0.51812 0.65657 1.1233 0.22261 0.60015 0.07587 1.1757-0.14079 0.57049-0.68272 1.0306-0.28586 0.24272-0.8751 0.67129t-1.8964 1.436q-1.3012 1.0023-1.9911 1.5779-0.35722-0.44485-0.64039-0.77835-0.33374-0.39305-0.79568-0.91297 0.81375-0.5987 1.6939-1.264l1.4245-1.0865q0.5434-0.41015 0.90072-0.71354 0.42283-0.35902 0.52092-0.67803 0.1091-0.31811 0.02145-0.6024-0.07664-0.28339-0.29407-0.53947-0.22755-0.26799-0.51588-0.40238-0.28328-0.12843-0.67139-0.12685-0.38306 0.0075-0.77274 0.16418-0.38373 0.15159-0.97207 0.56915-0.58239 0.41251-1.495 1.1362l-1.691 1.364q-0.40778-0.50441-0.6859-0.83195t-0.75523-0.86532q0.49396-0.34767 1.9771-1.4737t1.9774-1.5457q0.26204-0.22249 0.4053-0.41587 0.14922-0.19844 0.19877-0.46599 0.06056-0.26665-0.0087-0.50509-0.06922-0.23844-0.26137-0.46474-0.35396-0.41687-0.89591-0.4999-0.54194-0.08303-1.1269 0.15744-0.57992 0.24643-1.9636 1.3085-1.3727 1.063-2.1528 1.7254-0.45329-0.558-0.69095-0.83791-0.268-0.31563-0.75523-0.86532z"/></g></svg>';
var dnlded = '<svg enable-background="new 0 0 64 64" version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" >' +
    '<style type="text/css">	.st0{fill:#C75C5C;}.st1{opacity:0.2;}.st2{fill:#231F20;}.st3{fill:#FFFFFF;}.st4{fill:#8C81D4;}</style>' +
    '<g fill="#0092f9" stroke="#fff">' +
    '<g class="st1">	<path class="st2" d="m48 32c0-6.5-3.8-12-9.4-14.5-1.7-0.8-2.6 0.5-2.6 1.6v8.5c0 0.8 0.7 1.4 1.5 1.4h3.1c1.5 0 1.9 1.1 0.9 2.4l-7.7 9.8c-1 1.2-2.6 1.2-3.5 0l-7.7-9.8c-1-1.2-0.6-2.4 0.9-2.4h3.1c0.8 0 1.5-0.6 1.5-1.4v-8.5c0-1.1-1.5-2.1-2.8-1.6-4.3 2-7.6 5.9-8.7 10.6-4.9 0.8-8.6 4.9-8.6 9.9 0 5.5 4.5 10 10 10h30c4.4 0 8-3.6 8-8s-3.6-8-8-8z" fill="#0092f9" stroke="#fff"/></g>' +
    '<path d="m48 30c0-6.5-3.8-12-9.4-14.5-1.7-0.8-2.6 0.5-2.6 1.6v8.5c0 0.8 0.7 1.4 1.5 1.4h3.1c1.5 0 1.9 1.1 0.9 2.4l-7.7 9.8c-1 1.2-2.6 1.2-3.5 0l-7.7-9.8c-1-1.2-0.6-2.4 0.9-2.4h3.1c0.8 0 1.5-0.6 1.5-1.4v-8.5c0-1.1-1.5-2.1-2.8-1.6-4.3 2-7.6 5.9-8.7 10.6-4.9 0.8-8.6 4.9-8.6 9.9 0 5.5 4.5 10 10 10h30c4.4 0 8-3.6 8-8s-3.6-8-8-8z" fill="#0092f9" stroke="#fff"/>' +
    '<path class="st4" d="m40 9.2v0 0z" fill="#0092f9" stroke="#fff"/>' +
    '<path class="st4" d="m24 9.1v0 0z" fill="#0092f9" stroke="#fff"/></g></svg>';

var pws = document.getElementsByClassName('player-wrapper');
var uuid;
var uuids = [];
var pw = pwc = null;
var de;
var _audiolinks = [];
var title = [];
var dnldmp3files = [];

if (!pws.length) {
    var cel = document.getElementsByClassName('c-episodes__list');


    if (cel.length) {
        var pwcs = document.getElementsByClassName('c-episodes');
        if (pwcs.length) {
            pwc = pwcs[0];

        } else {
            pwc = cel[0];
        }
        for (var i = 0; i < cel[0].getElementsByTagName('article').length; i++) {
            var dp = JSON.parse(cel[0].getElementsByTagName('article')[i].attributes['data-entry'].value);
            uuids.push(dp['uuid'])
        }
    }


} else {
    pw = pws[0];
    var de = JSON.parse(pw.attributes['data-entry'].value);
    uuids.push(de['uuid']);

    var pwcs = pw.getElementsByClassName('player-controls__wrap');
    if (pwcs.length > 0) {
        pwc = pwcs[0];
    }

}



var getJSON = function(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
        var status = xhr.status;
        if (status === 200) {
            callback(null, xhr.response);
        } else {
            callback(status, xhr.response);
        }
    };
    xhr.send();
};

function saysWho() {
    const {
        userAgent
    } = navigator
    let match = userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || []
    let temp

    if (/trident/i.test(match[1])) {
        temp = /\brv[ :]+(\d+)/g.exec(userAgent) || []

        return "IE ${temp[1] || ''}"
    }

    if (match[1] === 'Chrome') {
        temp = userAgent.match(/\b(OPR|Edge)\/(\d+)/)

        if (temp !== null) {
            return temp.slice(1).join(' ').replace('OPR', 'Opera')
        }

        temp = userAgent.match(/\b(Edg)\/(\d+)/)

        if (temp !== null) {
            return temp.slice(1).join(' ').replace('Edg', 'Edge (Chromium)')
        }
    }

    match = match[2] ? [match[1], match[2]] : [navigator.appName, navigator.appVersion, '-?']
    temp = userAgent.match(/version\/(\d+)/i)

    if (temp !== null) {
        match.splice(1, 1, temp[1])
    }

    return match.join(' ')
}


var who = saysWho();

function force_download(blob, filename) {

    //first we need to prepend BOM for the UTF-8 text types
    // if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
    //   blob = new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});
    // }
    //than we need to declare all variable to check which download we need to use
    var blob_url = blob,
        download_link = document.createElementNS("http://www.w3.org/1999/xhtml", "a"),
        use_download_link = "download" in download_link,
        click = function(node) {
            var event = new MouseEvent("click");
            node.dispatchEvent(event);
        },
        is_opera = who == 'Opera',
        is_chrome = who == 'Chrome',
        is_safari = who == 'Safari',
        is_chrome_ios = /CriOS\/[\d]+/.test(navigator.userAgent),
        type = blob.type,
        forced_download = false;
    //now we can start checking which download we use
    if (typeof window === "undefined" || typeof window.navigator !== "undefined" && /MSIE [1-9]\./.test(window.navigator.userAgent)) {
        return; //IE <10 is not supported
    } else if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) {
        window.navigator.msSaveOrOpenBlob(blob, filename);
    } else if (use_download_link) {
        download_link.href = blob_url;
        download_link.download = filename;
        click(download_link);
    } else if ((is_chrome_ios || (forced_download && is_safari)) && window.FileReader) {
        var reader = new FileReader();
        reader.onloadend = function() {
            var url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');
            var openWindow = window.open(url, "_blank");
            if (!openWindow) window.location.href = url;
        }
    } else {
        if (force) {
            window.location.href = blob_url;
        } else {
            var openWindow = window.open(blob_url, "_blank");
            if (!openWindow) window.location.href = url;
        }
    }
    download_ready()
}

function download_ready() {
    dnldmp3files = dnldmp3files.splice(1);
    if (!dnldmp3files.length) {
        var span = document.getElementById('span_dnlded');
        span.style.display = 'none';
        return true;
    }
    download_resource(dnldmp3files[0][1], dnldmp3files[0][0]);
}

function download_resource(url, filename) {
    if (!filename) filename = url.split('\\').pop().split('/').pop();
    fetch(url, {
            headers: new Headers({
                'Origin': location.origin
            }),
            mode: 'cors'
        })
        .then(response => response.blob())
        .then(blob => {
            let blobUrl = window.URL.createObjectURL(blob);
            force_download(blobUrl, filename);
        })
        .catch(e => console.error(e));
}

function download_api_links() {
    var output_text = '';
    for (var link_idx = 0; link_idx < _audiolinks.length; link_idx++) {

        // dp=JSON.parse(mrp.attributes['data-player'].value ) ;    
        // _playlist = dp['data']['playlist']; 
        for (var j = 0; j < _audiolinks[link_idx].length; j++) {

            var href = _audiolinks[link_idx][j]['url'];
            if (_audiolinks[link_idx][j]['variant'] == 'dash') {
                output_text = output_text + href + '\n';
            } else if (_audiolinks[link_idx][j]['variant'] == 'mp3' || _audiolinks[link_idx][j]['variant'] == 'm4a') {
                var suffix = _audiolinks[link_idx].length == 1 ? '' : '_' + j;
                var name = title[link_idx] + suffix + '.' + _audiolinks[link_idx][j]['variant'];
                dnldmp3files.push([name, href]);


            }
        }

    }

    try {

        if (dnldmp3files.length) {
            download_resource(dnldmp3files[0][1], dnldmp3files[0][0]);

        }
        if (output_text != '') {
            if (!document.getElementById('dnld_stream')) {
                var div0 = document.createElement('div');
                var div1 = document.createElement('div');
                div1.style.color = 'blue';
                div1.innerText = 'pro stazeni a konverzi streamu do mp3 vyuzijte napr. program youtube-dl';
                var ta = document.createElement('textarea');
                ta.id = 'dnld_stream'
                ta.style.width = '100%';
                ta.style.height = '100px';
                ta.style['line-height'] = 1.2;
                ta.style['font-size'] = '0.9em';
                ta.style.width = '100%';
                ta.value = output_text;
                pwc.append(div0);
                div0.append(div1);
                div0.append(ta);
            }
            var blob = new Blob([output_text], {
                'type': 'data:text/plain;charset=utf-8'
            })
            var name = title + '.txt';
            let blobUrl = window.URL.createObjectURL(blob);
            force_download(blobUrl, name);
            var span = document.getElementById('span_dnlded');
            if (span) {
                span.style.display = 'none';
            }


            // mrpm.append('<div><div style="color:blue">pro stazeni a konverzi streamu do mp3 vyuzijte napr. program youtube-dl</div>
            //             <textarea style="width: 100%;height: 100px;line-height: 1.2;font-size: 0.9em;">'+output_text + '</textarea></div>');           

        }

    } catch (err) {

    }



}


function download_api_info(link_idx) {
    if (link_idx == uuids.length) {
        download_api_links();
    } else {
        uuid = uuids[link_idx];
        getJSON("https://api.mujrozhlas.cz/episodes/" + uuid,
            function(err, data) {
                if (err !== null) {
                    alert('Something went wrong: ' + err);
                } else {
                    title.push(data.data.attributes.shortTitle);
                    _audiolinks.push(data.data.attributes.audioLinks);
                    download_api_info(link_idx + 1);
                }
            });

    }
}

function download_mp3() {
    var d = document.getElementById('dnld_mp3');
    if (d) {

        if (!document.getElementById('span_dnlded')) {
            var span = document.createElement('span')
            span.id = 'span_dnlded';
            span.style.position = 'absolute';
            span.style.width = '50px';
            span.style.height = '50px';
            span.style.left = 0;
            span.style.top = 0;
            span.style['z-index'] = 100;
            var svg = document.createElement('svg')
            d.append(span);
            span.append(svg);
            svg.outerHTML = dnlded;
        } else {
            var span = document.getElementById('span_dnlded');
            span.style.display = 'inline-block';
        }
    }
    download_api_info(1);
}


function create_div_icon(svgicon) {
    var d = document.createElement('div');
    d.id = 'dnld_mp3';
    d.style.width = '50px';
    d.style.height = '50px';
    d.style.float = 'right';
    d.style.right = '0em';
    d.style.top = '20px';
    d.style.position = 'absolute';
    d.onclick = function() {
        download_mp3();
    }

    var svg = document.createElement('svg')

    d.append(svg);
    svg.outerHTML = svgicon;
    pwc.append(d);
    return true;
}



if (uuids.length) {
    try {


        uuid = uuids[0];
        getJSON("https://api.mujrozhlas.cz/episodes/" + uuid,
            function(err, data) {
                if (err !== null) {
                    alert('Something went wrong: ' + err);
                } else {
                    title.push(data.data.attributes.shortTitle);
                    _audiolinks.push(data.data.attributes.audioLinks);

                    if (_audiolinks[0].length) {



                        var spec_type = false;
                        for (var j = 0; j < _audiolinks[0].length; j++) {
                            var href = _audiolinks[0][j]['url'];
                            if (_audiolinks[0][j]['variant'] == 'dash') {
                                create_div_icon(dnldstream);
                                spec_type = true;
                                break;
                            } else if (_audiolinks[0][j]['variant'] == 'mp3' || _audiolinks[0][j]['variant'] == 'm4a') {
                                create_div_icon(dnldmp3);
                                spec_type = true;
                                break;
                            }

                            if (spec_type) {
                                break;
                            }
                        }
                        if (!spec_type) {
                            alert('neosetreny typ audia');
                        }
                    }

                }
            });

    } catch (err) {
        alert('Chyba')
    }
}
